<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vue with Bootstrap</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <div id="app">
    <h1>Hello, world!</h1>
    <ul class="list-group">
      <li v-for="(files, key) in jsonData" :key="key" class="list-group-item" @click="toggleCollapse(key)" :data-bs-toggle="collapse" :href="'#collapse' + key" :aria-expanded="!collapsedItems[key]" :aria-controls="'collapse' + key">
        {{ key }} ({{ files.length }} resources)
      </li>
      <div v-for="(files, key) in jsonData" :key="key" class="collapse" :id="'collapse' + key">
        <div v-for="fileUrl in files" :key="fileUrl">
          <template v-if="fileUrl.endsWith('.mp4')">
            <video class="rounded img-fluid" width="320" height="240" controls>
              <source :src="fileUrl" type="video/mp4">
            </video>
          </template>
          <template v-else>
            <img class="rounded img-fluid" :src="fileUrl">
          </template>
        </div>
      </div>
    </ul>
    <button @click="deleteSelected">Delete Selected</button>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script>
    const app = Vue.createApp({
      data() {
        return {
          jsonData: {
            "23a6ea32544c55288044341870823478": [
              "/Users/chentao02/github/IKonw/小说素材/李小冉14-3.jpeg",
              "/Users/chentao02/github/IKonw/小说素材/李小冉14-3_副本.jpeg"
            ],
            "82a9f1ee48b3d7228784b53a814a5c30": [
              "/Users/chentao02/github/IKonw/小说素材/铁萍姑.webp",
              "/Users/chentao02/github/IKonw/小说素材/铁萍姑_副本.webp"
            ],
            "anotherKey": [
              "/Users/chentao02/github/IKonw/小说素材/sample.mp4"
            ]
          },
          collapsedItems: {}
        };
      },
      methods: {
        toggleCollapse(key) {
          this.collapsedItems[key] =!this.collapsedItems[key];
        },
        deleteSelected() {
          const selectedElements = document.querySelectorAll('.selected');
          selectedElements.forEach(element => {
            element.parentNode.removeChild(element);
          });
        }
      }
    });
    app.mount('#app');
  </script>
  <style>
   .selected::after {
      content: "✔";
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 16px;
      color: blue;
    }
  </style>
</body>

</html>
